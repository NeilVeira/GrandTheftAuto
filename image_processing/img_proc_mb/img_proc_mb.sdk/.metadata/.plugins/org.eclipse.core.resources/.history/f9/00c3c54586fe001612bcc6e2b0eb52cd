#include "xparameters.h"
#include "xil_io.h"
//#include "image_proc_AXI.h"

#define XPAR_IMAGE_PROC_AXI_0_S00_AXI_BASEADDR 0x44A00000

volatile unsigned int *axi_ptr = (unsigned int*) XPAR_IMAGE_PROC_AXI_0_S00_AXI_BASEADDR;

int main()
{
	unsigned int empty, full, dout, rd_en;
	while (1){
		//poll until not empty
		do {
			empty = *(axi_ptr+2);
		} while (empty);

		//read value
		*(axi_ptr) = 0xDEADBEEF; //set read enable
		dout = *(axi_ptr+1);
		*(axi_ptr+4) = 0x12345678;
		//xil_printf("read value %x\n",dout);
		//write to slv_reg_4 (free)
	}
	return 0;
}
